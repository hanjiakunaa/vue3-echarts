<script setup lang="ts">
import { ref, reactive } from "vue";
import { graphic } from "echarts/core";
import { countUserNum } from "@/api";
import { ElMessage } from "element-plus";

let colors = ["#0BFC7F", "#A0A0A0", "#F48C02", "#F4023C"];
const option = ref({});
const state = reactive({
  lockNum: 0,
  offlineNum: 0,
  onlineNum: 0,
  alarmNum: 0,
  totalNum: 0,
});
const echartsGraphic = (colors: string[]) => {
  return new graphic.LinearGradient(1, 0, 0, 0, [
    { offset: 0, color: colors[0] },
    { offset: 1, color: colors[1] },
  ]);
};
const getData = () => {
  countUserNum()
    .then((res) => {
      console.log("左中--用户总览", res);
      if (res.success) {
        // state.lockNum = res.data.lockNum;
        // state.offlineNum = res.data.offlineNum;
        // state.onlineNum = res.data.onlineNum;
        // state.totalNum = res.data.totalNum;
        // state.alarmNum = res.data.alarmNum;
        // setOption();
      } else {
        ElMessage.error(res.msg);
      }
    })
    .catch((err) => {
      ElMessage.error(err);
    });
};
getData();

var nodes = [
  {
    x: 500,
    y: 1200,
    nodeName: "1号罐",
    svgPath:
      "M544 552.325V800a32 32 0 0 1-32 32 31.375 31.375 0 0 1-32-32V552.325L256 423.037a32 32 0 0 1-11.525-43.512A31.363 31.363 0 0 1 288 368l224 128 222.075-128a31.363 31.363 0 0 1 43.525 11.525 31.988 31.988 0 0 1-11.525 43.513L544 551.038z m0 0,M64 256v512l448 256 448-256V256L512 0z m832 480L512 960 128 736V288L512 64l384 224z m0 0",
    symbolSize: 70,
  },
  {
    x: 100,
    y: 500,
    nodeName: "2号罐",
    svgPath:
      "M1172.985723 682.049233l-97.748643-35.516964a32.583215 32.583215 0 0 0-21.830134 61.582735l25.7398 9.123221-488.744218 238.181638L115.670112 741.349163l47.245961-19.223356a32.583215 32.583215 0 0 0-22.808051-60.604819l-119.579777 47.896905a32.583215 32.583215 0 0 0 0 59.952875l557.820313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.527227-278.584184a32.583215 32.583215 0 0 0-3.258721-59.952875z,M1185.041693 482.966252l-191.587622-68.749123a32.583215 32.583215 0 1 0-21.831133 61.254764l118.927833 43.010323-488.744218 237.855666-471.474695-213.744727 116.973-47.244961a32.583215 32.583215 0 1 0-24.111938-60.604819l-190.609705 75.593537a32.583215 32.583215 0 0 0-20.528246 29.650465 32.583215 32.583215 0 0 0 20.528246 30.30141l557.819313 251.866468a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0 18.24744-30.953354 32.583215 32.583215 0 0 0-21.505161-29.651465z,M32.583215 290.075742l557.819313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0-3.257721-59.952875L626.244463 2.042365a32.583215 32.583215 0 0 0-23.134022 0l-570.527226 228.080502a32.583215 32.583215 0 0 0-19.224357 30.627382 32.583215 32.583215 0 0 0 19.224357 29.325493zM615.817355 67.534767l474.733416 170.408432-488.744218 238.180638-471.474695-215.372588z",
  },
  {
    x: 500,
    y: 500,
    nodeName: "3号罐",
    svgPath:
      "M1172.985723 682.049233l-97.748643-35.516964a32.583215 32.583215 0 0 0-21.830134 61.582735l25.7398 9.123221-488.744218 238.181638L115.670112 741.349163l47.245961-19.223356a32.583215 32.583215 0 0 0-22.808051-60.604819l-119.579777 47.896905a32.583215 32.583215 0 0 0 0 59.952875l557.820313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.527227-278.584184a32.583215 32.583215 0 0 0-3.258721-59.952875z,M1185.041693 482.966252l-191.587622-68.749123a32.583215 32.583215 0 1 0-21.831133 61.254764l118.927833 43.010323-488.744218 237.855666-471.474695-213.744727 116.973-47.244961a32.583215 32.583215 0 1 0-24.111938-60.604819l-190.609705 75.593537a32.583215 32.583215 0 0 0-20.528246 29.650465 32.583215 32.583215 0 0 0 20.528246 30.30141l557.819313 251.866468a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0 18.24744-30.953354 32.583215 32.583215 0 0 0-21.505161-29.651465z,M32.583215 290.075742l557.819313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0-3.257721-59.952875L626.244463 2.042365a32.583215 32.583215 0 0 0-23.134022 0l-570.527226 228.080502a32.583215 32.583215 0 0 0-19.224357 30.627382 32.583215 32.583215 0 0 0 19.224357 29.325493zM615.817355 67.534767l474.733416 170.408432-488.744218 238.180638-471.474695-215.372588z",
  },
  {
    x: 900,
    y: 500,
    nodeName: "4号罐",
    svgPath:
      "M1172.985723 682.049233l-97.748643-35.516964a32.583215 32.583215 0 0 0-21.830134 61.582735l25.7398 9.123221-488.744218 238.181638L115.670112 741.349163l47.245961-19.223356a32.583215 32.583215 0 0 0-22.808051-60.604819l-119.579777 47.896905a32.583215 32.583215 0 0 0 0 59.952875l557.820313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.527227-278.584184a32.583215 32.583215 0 0 0-3.258721-59.952875z,M1185.041693 482.966252l-191.587622-68.749123a32.583215 32.583215 0 1 0-21.831133 61.254764l118.927833 43.010323-488.744218 237.855666-471.474695-213.744727 116.973-47.244961a32.583215 32.583215 0 1 0-24.111938-60.604819l-190.609705 75.593537a32.583215 32.583215 0 0 0-20.528246 29.650465 32.583215 32.583215 0 0 0 20.528246 30.30141l557.819313 251.866468a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0 18.24744-30.953354 32.583215 32.583215 0 0 0-21.505161-29.651465z,M32.583215 290.075742l557.819313 251.540496a32.583215 32.583215 0 0 0 27.695632 0l570.201254-278.584184a32.583215 32.583215 0 0 0-3.257721-59.952875L626.244463 2.042365a32.583215 32.583215 0 0 0-23.134022 0l-570.527226 228.080502a32.583215 32.583215 0 0 0-19.224357 30.627382 32.583215 32.583215 0 0 0 19.224357 29.325493zM615.817355 67.534767l474.733416 170.408432-488.744218 238.180638-471.474695-215.372588z",
  },
];
let charts = {
  nodes: [],
  linesData: [
    {
      coords: [
        [500, 1000],
        [500, 800],
      ],
    },
    {
      coords: [
        [500, 800],
        [100, 800],
        [100, 600],
      ],
    },
    {
      coords: [
        [500, 800],
        [500, 600],
      ],
    },
    {
      coords: [
        [500, 800],
        [900, 800],
        [900, 600],
      ],
    },
  ],
};
for (var j = 0; j < nodes.length; j++) {
  const { x, y, nodeName, svgPath, symbolSize } = nodes[j];
  let node = {
    nodeName,
    value: [x, y],
    symbolSize: 100,
    symbol:
      "image://data:image/png;base64,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",
    // symbol: "path://M801.444224 167.329709H171.784992v787.07404h629.659232V167.329709z,M774.236726 167.329709H197.049097v787.07404h577.187629V167.329709z,M748.972621 167.329709H224.256595v787.07404h524.716026V167.329709z,M720.793427 167.329709H252.435789v787.07404h468.357638V167.329709z,M693.58593 167.329709H277.699894v787.07404h415.886036V167.329709z,M668.321825 167.329709H304.907392v787.07404h363.414433V167.329709z,M640.142631 167.329709H333.086586v787.07404h307.056045V167.329709z,M612.935133 167.329709H360.294083v787.07404h252.64105V167.329709z,M587.671028 167.329709H385.558188v787.07404h202.11284V167.329709z,M559.491834 167.329709H413.737382v787.07404h145.754452V167.329709z,M532.284336 167.329709h-91.339456v787.07404h91.339456V167.329709z,M507.020231 167.329709h-40.811246v787.07404h40.811246V167.329709z,M763.548066 875.696345h-60.245173v78.707404h60.245173v-78.707404z,M763.548066 875.696345h-60.245173l39.83955 20.405623 20.405623 58.301781v-78.707404z,M269.926323 875.696345H211.624542v78.707404h58.301781v-78.707404z,M269.926323 875.696345H211.624542l38.867854 20.405623 19.433927 58.301781v-78.707404z,M722.73682 167.329709h-8.745267v37.896158h8.745267v-37.896158zM673.180306 167.329709h-8.745267v37.896158h8.745267v-37.896158zM308.794177 167.329709h-8.745267v37.896158h8.745267v-37.896158zM259.237663 167.329709h-8.745267v37.896158h8.745267v-37.896158z,M751.88771 167.329709v-11.660356l-18.46223-19.433927-34.009372-18.46223-49.556514-14.575445-60.245173-9.716964-68.018744-4.858481h-69.962137l-68.018744 4.858481-60.245174 9.716964-49.556513 14.575445-34.981069 18.46223-17.490534 19.433927v11.660356h530.546204z,M720.793427 167.329709v-11.660356l-16.518838-19.433927-31.094283-18.46223-43.726335-14.575445-53.443299-9.716964-58.301781-4.858481h-62.188566l-58.301781 4.858481-55.386691 9.716964-41.782943 14.575445-31.094283 18.46223-16.518838 19.433927v11.660356h468.357638z,M687.755751 167.329709v-11.660356l-12.632052-19.433927-27.207498-18.46223-36.924461-14.575445-45.669728-9.716964-53.443299-4.858481h-52.471603l-51.499906 4.858481-45.669728 9.716964-36.924461 14.575445-27.207498 18.46223-12.632052 19.433927v11.660356h402.282286z,M656.661468 167.329709v-11.660356l-12.632052-19.433927-21.37732-18.46223-31.094283-14.575445-38.867853-9.716964-43.726336-4.858481h-44.698032l-43.726335 4.858481-37.896158 9.716964-32.065979 14.575445-21.37732 18.46223-12.632052 19.433927v11.660356h340.09372z,M623.623793 167.329709v-11.660356l-8.745267-19.433927-18.462231-18.46223-25.264105-14.575445-31.094283-9.716964-34.981068-4.858481h-36.924461l-34.981069 4.858481-31.094283 9.716964-25.264105 14.575445-18.46223 18.46223-8.745268 19.433927v11.660356h274.01837z,M592.52951 167.329709v-11.660356l-6.801875-19.433927-14.575445-18.46223-20.405623-14.575445-23.320712-9.716964-28.179194-4.858481h-27.207498l-25.264105 4.858481-26.235801 9.716964-18.462231 14.575445-14.575445 18.46223-6.801874 19.433927v11.660356h211.829803z,M559.491834 167.329709v-11.660356l-4.858482-19.433927-9.716963-18.46223-12.632053-14.575445-16.518838-9.716964-20.405623-4.858481h-17.490534l-20.405623 4.858481-16.518838 9.716964-12.632053 14.575445-11.660356 18.46223-2.915089 19.433927v11.660356h145.754452z,M528.397551 167.329709v-11.660356l-2.915089-19.433927-5.830178-18.46223-7.773571-14.575445-8.745267-9.716964-10.68866-4.858481h-11.660356l-10.68866 4.858481-8.745267 9.716964-7.773571 14.575445-5.830178 18.46223-2.915089 19.433927v11.660356h83.565886z,M495.359875 167.329709v-31.094283l-0.971696-18.46223-1.943393-14.575445-1.943393-9.716964-1.943392-4.858481h-3.886786l-1.943392 4.858481-1.943393 9.716964-1.943393 14.575445-0.971696 18.46223v31.094283h17.490534z,M575.038975 68.216682H398.190241l-10.68866 99.113027h198.226054L575.038975 68.216682zM565.322012 58.499719H407.907204v9.716963h157.414808V58.499719zM544.916389 58.499719H428.312827V47.811059h116.603562v10.68866z,M495.359875 39.065792h-17.490534l-30.122587 8.745267h79.679101l-32.06598-8.745267z",
    itemStyle: {
      color: "orange",
    },
  };
  charts.nodes.push(node);
}

option.value = {
  tooltip: {
    trigger: "item",

    // axisPointer: {
    //   type: "shadow",
    //   textStyle: {
    //     color: "#fff",
    //   },
    // },
    formatter: function (params: any) {
      console.log("params", params);
      let { seriesName, value, data } = params;

      return `<h4 >名称:  ${data.nodeName}</h4>
              <h4>内部环境</h4>
              <div>
                <span>压力: 1</span>
                <span>温度: 2</span>
              </div>
              <div>
                <span>液位: 1</span>
                <span>密度: 2</span>
              </div>
              <div>
                <span>体积: 1</span>
                <span>重量: 2</span>
              </div>
              <h4 style="color:'orange'">实时罐存</h4>
              <div>
                <span>总重量: 1</span>
                <span>总体积: 2</span>
              </div>
              <h4>
               总管线累积体: 100
              </h4>
        `;
    },
  },
  grid: {
    left: "5%", //图表距离容器左侧多少距离
    right: "5%", //图表距离容器右侧侧多少距离
    bottom: "5%", //图表距离容器上面多少距离
    top: "40%",
  },
  xAxis: {
    min: 0,
    max: 1000,
    show: false,
    type: "value",
  },
  yAxis: {
    min: 0,
    max: 1000,
    show: false,
    type: "value",
  },
  series: [
    {
      type: "graph",
      coordinateSystem: "cartesian2d",
      label: {
        show: true,
        position: "bottom",
        color: "orange",
        formatter: function (item) {
          return item.data.nodeName;
        },
      },
      data: charts.nodes,
    },
    {
      type: "lines",
      polyline: true,
      coordinateSystem: "cartesian2d",
      lineStyle: {
        type: "solid",
        width: 2,
        color: "#175064",
        curveness: 0.3,
      },
      effect: {
        show: true,
        trailLength: 0.1,
        symbol: "arrow",
        color: "orange",
        symbolSize: 8,
      },
      data: charts.linesData,
    },
  ],
};
</script>

<template>
  <v-chart class="chart" :option="option"  v-if="JSON.stringify(option) != '{}'" autoresize />
</template>

<style scoped lang="scss"></style>
